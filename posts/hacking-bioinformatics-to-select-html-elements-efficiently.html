<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DOSAYGO Studio</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../theme.css">
</head>
<body>
  <header>
    <h1>DOSAYGO Studio</h1>
    <nav>
      <a href="#home">Home</a>
      <a href="#posts">Posts</a>
      <a href="#about">About</a>
    </nav>
  </header>
  <main>
    <article>
      <h2>Selector Generalization: Tracing the Web’s Silent Constellations</h2>
      <p class="author">By Cris, January 1, 2013</p>
      <p>In the stillness of a new year, I stood at the edge of the web’s vast lattice, where elements flicker like stars in a forgotten sky. I wanted to touch them—not with rigid selectors, but with a gesture, a whisper of intent. Selector Generalization emerged like a dream half-remembered, a hack that borrowed the language of life’s deepest patterns: a bioinformatics algorithm for aligning DNA, reshaped to align the DOM’s own strands. By clicking a few examples, I could trace the web’s silent constellations, revealing families of elements as if the page were a living thing, its connections humming beneath the surface, waiting to be seen.</p>
      <p>The first challenge was to map the page’s hidden structure—a canonical path for each element, as unique as a genetic fingerprint. I walked each node upward to the root, noting its tag, classes, IDs, and position among siblings, like a traveler counting stars to find their place. The `get_canonical_path` function became my compass, transforming a DOM element into a sequence of levels, each a set of traits—tags, geometry, classes, IDs—marked with a code to track its depth. This path was the element’s essence, a strand of its digital DNA, ready to be compared with others in a dance of alignment.</p>
      <pre><code>path_lcs.get_canonical_path(node) {
  const path = [];
  const canonical_path = [];
  let code = next_code();
  while(!!node && node.tagName != 'HTML') {
    const canonical_level = {
      tags: new Set(),
      geometry: new Set(),
      classes: new Set(),
      ids: new Set()
    };
    let index_name = '';
    if(!!node.parentNode) {
      let count = 0;
      const siblings = Array.from(node.parentNode.childNodes);
      for(const sibling of siblings) {
        if(sibling.tagName == node.tagName) {
          count += 1;
        }
        if(sibling === node) {
          index_name = `:nth-of-type(${count})`;
          break;
        }
      }
    }
    if(!!node.id && node.id.length > 0) {
      canonical_level.ids.add(node.id);
    }
    let classes = node.getAttribute('class') || node.className;
    if(typeof classes !== 'string') {
      classes = Array.from(node.classList);
    } else {
      classes = classes.split(/\s+/);
    }
    classes.forEach(classword => {
      if(classword.length > 0) {
        canonical_level.classes.add(`.${safe(classword)}`);
      }
    });
    canonical_level.tags.add(node.tagName);
    canonical_level.geometry.add(index_name);
    canonical_level.code = code;
    code += 1;
    canonical_path.unshift(canonical_level);
    node = node.parentNode;
  }
  return {canonical: canonical_path};
}
</code></pre>
      <p>With paths in hand, the next puzzle was to find their shared patterns—a longest common subsequence (LCS) that could generalize across examples. I adapted the Needleman-Wunsch algorithm, scoring each pair of paths for similarity, much like aligning DNA strands to find kinship. The `lcs_from_canonical_path_pair` function compared paths level by level, measuring their intersection against their union, as if weighing the light of overlapping stars. From this, I built a selector, stitching together tags, classes, and geometry into a CSS rule that captured the family of elements, whether they were tabs, accordions, or links in a demo page—a constellation revealed with a single click.</p>
      <img src="selector-generalization-screenshot.jpg" alt="Selector Generalization in action: a demo page with a control panel showing selected elements highlighted, set against a backdrop of a starry night sky">
      <p>Selector Generalization was a bridge across realms—biology’s patterns meeting the web’s structure, a quiet act of seeing the unseen. The demo page, with its tabs and forms, became a canvas to test this magic, letting users mark examples and watch the page hum with recognition. It was a reminder that the web, like life, is woven from hidden threads, waiting for a gentle touch to reveal its order. In its surreal simplicity, this project felt like a skydiver glimpsing the earth’s veins, or a rider tracing constellations across a desert night—a fleeting moment where the infinite felt within reach.</p>
    </article>
  </main>
  <footer>
    <p>© 2025 DOSAYGO Studio. <a href="#contact">Contact</a></p>
  </footer>
</body>
</html>
